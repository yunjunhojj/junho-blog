# Day 3: 라우팅과 네트워크 장비

- 라우팅(Routing) 기초
  - 정적 라우팅 vs 동적 라우팅
  - 대표적인 라우팅 프로토콜: RIP, OSPF, BGP
- 네트워크 장비
  - 허브(Hub), 스위치(Switch), 라우터(Router), 게이트웨이(Gateway)
  - L2 스위치 vs L3 스위치
- NAT(Network Address Translation)
  - NAT 동작 방식과 장단점
  - 사설 IP와 공인 IP

---

## 1. 라우팅(Routing) 기초

네트워크 상에서 패킷을 목적지까지 전달하기 위한 경로를 결정하는 과정을 라우팅(Routing)이라고 한다. 라우팅을 수행하는 장치는 주로 **라우터(Router)**이며, 라우팅 정보를 기반으로 각 패킷이 어느 경로로 이동할지 결정한다.

### 1.1 정적 라우팅(Static Routing) vs 동적 라우팅(Dynamic Routing)

| 구분     | 정적 라우팅                                                              | 동적 라우팅                                                   |
| -------- | ------------------------------------------------------------------------ | ------------------------------------------------------------- |
| **설정** | 네트워크 관리자(사람)가 직접 라우팅 경로를 수동으로 설정                 | 라우팅 프로토콜에 의해 자동으로 업데이트 (예: RIP, OSPF, BGP) |
| **장점** | - 단순성과 예측 가능성<br/>- 작은 네트워크 환경에 적합                   | - 장애나 네트워크 변화에 자동 대응<br/>- 관리 효율성 향상     |
| **단점** | - 장애/변경 발생 시 수동 수정 필요<br/>- 대규모/복잡 네트워크에 비효율적 | - 프로토콜 오버헤드(트래픽) 발생<br/>- 구현 및 운영이 더 복잡 |

- **정적 라우팅**:

  - 소규모 네트워크 또는 변동이 거의 없는 환경에서 사용하기 용이
  - 관리자가 직접 라우팅 테이블에 경로 정보를 추가/삭제

- **동적 라우팅**:
  - 라우팅 프로토콜을 통해 라우터 간 정보를 교환하고, 자동으로 최적 경로를 선택
  - 대규모 또는 변동이 잦은 네트워크에 적합

### 1.2 대표적인 라우팅 프로토콜

1. **RIP (Routing Information Protocol)**

   - 거리 벡터(Distance Vector) 알고리즘 기반
   - 최대 홉(Hop) 수가 15로 제한
   - 소규모 네트워크용, 간단하지만 확장성이 떨어짐

2. **OSPF (Open Shortest Path First)**

   - 링크 상태(Link State) 알고리즘 기반
   - 토폴로지 정보를 라우터가 서로 교환하여 최단 경로를 계산
   - 대규모 네트워크에서 선호되며, 빠른 수렴 속도와 유연한 영역(Area) 구조 제공

3. **BGP (Border Gateway Protocol)**
   - 자율 시스템(AS) 간 라우팅에 사용(인터넷 백본)
   - 경로 벡터(Path Vector) 알고리즘 기반
   - 라우팅 정책(Policy)에 따라 경로 선택 가능

---

## 2. 네트워크 장비

네트워크 상에서 트래픽을 전송하거나 분배하는 역할을 하는 장비들은 계층별로 달라진다.

### 2.1 허브(Hub)

- **물리 계층(OSI 1계층)** 장비
- 들어오는 신호를 단순하게 모든 포트로 재전송(Br/oadcast)
- 트래픽 충돌(Collision)이 잦고, 보안성이 떨어진다
- 근래에는 스위치의 등장으로 점차 사용이 줄어듦

### 2.2 스위치(Switch)

- **데이터링크 계층(OSI 2계층)** 장비
- **MAC 주소** 테이블을 기반으로 각 포트로 들어온 프레임을 목적지 MAC이 위치한 포트로만 전달
- 충돌 도메인을 분리해 트래픽 효율과 보안성이 허브보다 우수
- VLAN 같은 기능으로 네트워크를 가상으로 구분 가능

### 2.3 라우터(Router)

- **네트워크 계층(OSI 3계층)** 장비
- IP 주소 기반으로 패킷을 목적지에 전달(라우팅)
- 서로 다른 네트워크(서브넷) 간 통신 담당
- 라우팅 테이블을 유지하며, 정적/동적 라우팅 프로토콜 활용

### 2.4 게이트웨이(Gateway)

- 엄밀히는 라우터 등 상위 계층 장비를 의미하기도 하지만, 일반적으로 **‘네트워크를 출입하는 경로’**를 지칭
- IP 설정에서 기본 게이트웨이(Default Gateway)는 외부 네트워크로 나가는 출입구 역할
- 응용 계층까지 포함해 프로토콜 변환이나 트래픽 중계도 수행 가능(예: VoIP 게이트웨이)

### 2.5 L2 스위치 vs L3 스위치

| 구분         | L2 스위치                                                                  | L3 스위치                                                              |
| ------------ | -------------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| **OSI 계층** | 데이터링크 계층(2계층)                                                     | 네트워크 계층(3계층)                                                   |
| **기능**     | MAC 주소 기반 프레임 전달                                                  | IP 주소 기반 라우팅(간단한 라우팅 기능 포함)                           |
| **특징**     | - 포트 간 트래픽 분산, 충돌 도메인 분리<br/>- 브로드캐스트 도메인은 분리 X | - VLAN 간 라우팅, 정적 라우팅 등 가능<br/>- 브로드캐스트 도메인 분리 O |
| **장점**     | - 빠른 처리 속도<br/>- 간단한 내부 구조                                    | - 스위칭 + 라우팅 기능<br/>- VLAN 트래픽 처리 용이                     |
| **활용 예**  | - 소규모/단순한 내부망<br/>- 단일 서브넷 구성                              | - 부서별 VLAN 구분 + 내부 라우팅<br/>- 대규모 기업 내부망, 코어 스위치 |

---

## 3. NAT (Network Address Translation)

### 3.1 NAT 동작 방식

- **사설 IP(Private IP)**를 사용하는 내부 호스트가 외부로 트래픽을 보낼 때, 게이트웨이(주로 라우터)가 **공인 IP**로 패킷의 출발지 주소를 변환해주는 기술
- 반환 트래픽이 들어올 때는 라우터가 다시 해당 내부 호스트의 사설 IP로 목적지 주소를 재변환해 전달
- 일종의 중간 대리인(프록시) 역할을 수행

#### NAT 예시
